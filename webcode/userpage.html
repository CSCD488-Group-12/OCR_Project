<!DOCTYPE html>
<link rel="stylesheet" href="style.css">
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Userpage</title>
</head>

<body>
    <!--- Header -->
    <div class = "topnav">
        <a href="/index.html">Home</a>
        <a href="/userpage.html">My Notes</a>
        <a href="#">My Account</a>
        <button type="button" class="btn-login" onclick="logOut()">Log Out</button>
    
    </div>

    <!--- Main Body-->
    <div class = "mainbody">
        <!--- New Note-->
        <div class = "new-note">
            <button type="button" class="btn-newnote" id="newnote" onclick="changeUploadForm(), changeButton()">New Note</button>

            <!-- Upload photo box-->
            <div class="upload-form" id="new-note-form">
                <form action="/action_page.php" class="form-container" id="upload-form">
                    <!-- Upload section (left)-->
                    <div class="upload" id="upload">
                        <label>Drag and drop images to upload</label><br>
                        <label>or</label><br>
                        <input type="file" id="fileInput" accept="image/*">
                    </div>

                    <!-- Upload status (right)-->

                    <div class="current-uploads" id="current-uploads">
                        <h4>Uploads</h4>
                        <div id="preview"></div>

                  
                    
                        <button type="submit" class="btn-upload" onclick="convertSelections()">Convert</button>

                        <!-- Need window for image cropping -->
                        <!-- <div class="imagecropping" id="imagecropping">


                            <button type="submit" class="btn-upload" onclick="uploadSelections()">Convert</button>
                        </div> -->

                    </div>

                    
                </form>
            </div>

        </div>

        <!--- Recent Notes-->
        <div class = "recent-notes">
            
        </div>

        <!--- Collections-->
        <div class = "collections">
            
        </div>

        <!--- All Notes -->
        <div class = "all-notes">
            
        </div>


    </div>













    <script>
        function logOut(){

        }

        function changeUploadForm() {
            if (document.getElementById("newnote").textContent == 'New Note') {
                document.getElementById("new-note-form").style.display = "block";
            } else {
                closeUploadForm();
                
            }
          }

        function closeUploadForm() {
            document.getElementById("new-note-form").style.display = "none";
        }

        function changeButton() {
            if (document.getElementById("newnote").textContent == 'New Note') {
                document.querySelector('#newnote').textContent = 'Cancel';
            } else {
                document.querySelector('#newnote').textContent = 'New Note';
            }
        }

        function convertSelections() {
            //send to Azure
        }

        function uploadSelections(){

        }


        document.getElementById('fileInput').addEventListener('change', function(event) {
            var files = event.target.files;
            var preview = document.getElementById('preview');
    
            preview.innerHTML = '';
    
            for (var i = 0; i < files.length; i++) {
              var file = files[i];
    
              if (!file.type.match('image.*')) {
                continue;
              }
    
              var imgContainer = document.createElement('div');
              imgContainer.style.marginBottom = '1px';
              imgContainer.style.height = '200px';

              var img = document.createElement('img');
              img.src = URL.createObjectURL(file);
              img.style.height = '400px';
              img.style.display = 'block';
              img.style.marginBottom = '1px';

              var fileInfo = document.createElement('p');
              fileInfo.textContent = `File Name: ${file.name}, Type: ${file.type}, Size: ${file.size} bytes`;
              fileInfo.style.fontSize = '14px';
              fileInfo.style.marginTop = '0';
    
              preview.appendChild(imgContainer);
            }
          });

    </script>

</body>
</html>